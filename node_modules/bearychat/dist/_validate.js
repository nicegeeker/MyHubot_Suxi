'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
var validation = require('./_validation.json');

function getValidationSettings(method, path) {
  var rv = void 0;

  rv = validation[path];
  if (!rv) return null;

  rv = rv[method];
  if (!rv) return null;

  return rv;
}

function validate(method, path, payload) {
  payload = payload || {};

  var s = getValidationSettings(method, path);
  if (!s) {
    return 'unsupported api';
  }

  if (s.authentication !== false && !payload.token) {
    return 'auth token required';
  }

  if (s.parameters.length > 0) {
    /* eslint-disable */
    var _iteratorNormalCompletion = true;
    var _didIteratorError = false;
    var _iteratorError = undefined;

    try {
      for (var _iterator = s.parameters[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
        var ps = _step.value;

        if (ps.required && payload[ps.name] === undefined) {
          return ps.name + ' required';
        }
      }
      /* eslint-enable */
    } catch (err) {
      _didIteratorError = true;
      _iteratorError = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion && _iterator.return) {
          _iterator.return();
        }
      } finally {
        if (_didIteratorError) {
          throw _iteratorError;
        }
      }
    }
  }

  return null;
}

exports.default = {
  validate: validate
};
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9fdmFsaWRhdGUuanMiXSwibmFtZXMiOlsidmFsaWRhdGlvbiIsInJlcXVpcmUiLCJnZXRWYWxpZGF0aW9uU2V0dGluZ3MiLCJtZXRob2QiLCJwYXRoIiwicnYiLCJ2YWxpZGF0ZSIsInBheWxvYWQiLCJzIiwiYXV0aGVudGljYXRpb24iLCJ0b2tlbiIsInBhcmFtZXRlcnMiLCJsZW5ndGgiLCJwcyIsInJlcXVpcmVkIiwibmFtZSIsInVuZGVmaW5lZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxJQUFNQSxhQUFhQyxRQUFRLG9CQUFSLENBQW5COztBQUVBLFNBQVNDLHFCQUFULENBQStCQyxNQUEvQixFQUF1Q0MsSUFBdkMsRUFBNkM7QUFDM0MsTUFBSUMsV0FBSjs7QUFFQUEsT0FBS0wsV0FBV0ksSUFBWCxDQUFMO0FBQ0EsTUFBSSxDQUFDQyxFQUFMLEVBQVMsT0FBTyxJQUFQOztBQUVUQSxPQUFLQSxHQUFHRixNQUFILENBQUw7QUFDQSxNQUFJLENBQUNFLEVBQUwsRUFBUyxPQUFPLElBQVA7O0FBRVQsU0FBT0EsRUFBUDtBQUNEOztBQUVELFNBQVNDLFFBQVQsQ0FBa0JILE1BQWxCLEVBQTBCQyxJQUExQixFQUFnQ0csT0FBaEMsRUFBeUM7QUFDdkNBLFlBQVVBLFdBQVcsRUFBckI7O0FBRUEsTUFBTUMsSUFBSU4sc0JBQXNCQyxNQUF0QixFQUE4QkMsSUFBOUIsQ0FBVjtBQUNBLE1BQUksQ0FBQ0ksQ0FBTCxFQUFRO0FBQ04sV0FBTyxpQkFBUDtBQUNEOztBQUVELE1BQUlBLEVBQUVDLGNBQUYsS0FBcUIsS0FBckIsSUFBOEIsQ0FBQ0YsUUFBUUcsS0FBM0MsRUFBa0Q7QUFDaEQsV0FBTyxxQkFBUDtBQUNEOztBQUVELE1BQUlGLEVBQUVHLFVBQUYsQ0FBYUMsTUFBYixHQUFzQixDQUExQixFQUE2QjtBQUMzQjtBQUQyQjtBQUFBO0FBQUE7O0FBQUE7QUFFM0IsMkJBQWVKLEVBQUVHLFVBQWpCLDhIQUE2QjtBQUFBLFlBQXBCRSxFQUFvQjs7QUFDM0IsWUFBSUEsR0FBR0MsUUFBSCxJQUFlUCxRQUFRTSxHQUFHRSxJQUFYLE1BQXFCQyxTQUF4QyxFQUFtRDtBQUNqRCxpQkFBVUgsR0FBR0UsSUFBYjtBQUNEO0FBQ0Y7QUFDRDtBQVAyQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUTVCOztBQUVELFNBQU8sSUFBUDtBQUNEOztrQkFFYztBQUNiVDtBQURhLEMiLCJmaWxlIjoiX3ZhbGlkYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgdmFsaWRhdGlvbiA9IHJlcXVpcmUoJy4vX3ZhbGlkYXRpb24uanNvbicpO1xuXG5mdW5jdGlvbiBnZXRWYWxpZGF0aW9uU2V0dGluZ3MobWV0aG9kLCBwYXRoKSB7XG4gIGxldCBydjtcblxuICBydiA9IHZhbGlkYXRpb25bcGF0aF07XG4gIGlmICghcnYpIHJldHVybiBudWxsO1xuXG4gIHJ2ID0gcnZbbWV0aG9kXTtcbiAgaWYgKCFydikgcmV0dXJuIG51bGw7XG5cbiAgcmV0dXJuIHJ2O1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZShtZXRob2QsIHBhdGgsIHBheWxvYWQpIHtcbiAgcGF5bG9hZCA9IHBheWxvYWQgfHwge307XG5cbiAgY29uc3QgcyA9IGdldFZhbGlkYXRpb25TZXR0aW5ncyhtZXRob2QsIHBhdGgpO1xuICBpZiAoIXMpIHtcbiAgICByZXR1cm4gJ3Vuc3VwcG9ydGVkIGFwaSc7XG4gIH1cblxuICBpZiAocy5hdXRoZW50aWNhdGlvbiAhPT0gZmFsc2UgJiYgIXBheWxvYWQudG9rZW4pIHtcbiAgICByZXR1cm4gJ2F1dGggdG9rZW4gcmVxdWlyZWQnO1xuICB9XG5cbiAgaWYgKHMucGFyYW1ldGVycy5sZW5ndGggPiAwKSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgKi9cbiAgICBmb3IgKGxldCBwcyBvZiBzLnBhcmFtZXRlcnMpIHtcbiAgICAgIGlmIChwcy5yZXF1aXJlZCAmJiBwYXlsb2FkW3BzLm5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGAke3BzLm5hbWV9IHJlcXVpcmVkYDtcbiAgICAgIH1cbiAgICB9XG4gICAgLyogZXNsaW50LWVuYWJsZSAqL1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgdmFsaWRhdGUsXG59O1xuIl19